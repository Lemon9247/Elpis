# Elpis Default Configuration
# This file contains default settings for the Elpis agent.
# Copy to config.local.toml and customize as needed.

[model]
# Path to the GGUF model file
path = "./data/models/Meta-Llama-3.1-8B-Instruct-Q5_K_M.gguf"

# Context window size in tokens
# 4096 context + 20 GPU layers fits in 6GB VRAM (~3.9GB used)
context_length = 4096

# Number of layers to offload to GPU (0 = CPU only, 32 = all layers for 8B model)
# 20 layers fits in 6GB VRAM with 4096 context
gpu_layers = 20

# CPU threads to use for inference
# Set to 1 to avoid SIGSEGV race condition in ggml multi-threading
# Even with GPU offloading, some ops run on CPU and the threading is buggy
n_threads = 1

# Temperature for sampling (higher = more creative)
temperature = 0.7

# Top-p sampling (nucleus sampling)
top_p = 0.9

# Maximum tokens to generate per response
max_tokens = 4096

# Hardware backend: "auto" (detect), "cuda" (NVIDIA), "rocm" (AMD), "cpu"
hardware_backend = "auto"

[tools]
# Workspace directory for agent file operations
workspace_dir = "./workspace"

# Maximum timeout for bash commands (seconds)
max_bash_timeout = 30

# Maximum file size for read operations (bytes)
max_file_size = 10485760  # 10MB

# Enable dangerous commands (rm -rf, etc.) - USE WITH CAUTION
enable_dangerous_commands = false

[logging]
# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
level = "INFO"

# Log file path
output_file = "./logs/elpis.log"

# Log format: "json" or "text"
format = "json"

[memory]
# Enable automatic memory retrieval on each user message
enable_auto_retrieval = true

# Number of memories to retrieve per query
auto_retrieval_count = 3

# Enable periodic memory checkpoints
enable_checkpoints = true

# Save checkpoint every N messages
checkpoint_interval = 20

# Enable memory consolidation
enable_consolidation = true

# Check consolidation every N seconds
consolidation_check_interval = 300

# Minimum importance score for memory promotion (0.0-1.0)
consolidation_importance_threshold = 0.6

# Similarity threshold for clustering (0.0-1.0)
consolidation_similarity_threshold = 0.85
